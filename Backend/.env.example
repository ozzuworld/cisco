# CUCM Log Collector - Environment Variables (Example)
# Copy this file to .env and fill in your values
#
# For Docker deployment, see docker-compose.yml for recommended settings

# =============================================================================
# API Settings
# =============================================================================
API_HOST=0.0.0.0
API_PORT=8000
LOG_LEVEL=INFO

# Authentication (v0.3) - Optional
# If API_KEY is set, enables bearer token authentication
# If not set or empty, authentication is disabled (dev mode)
API_KEY=

# CORS - Allowed origins regex pattern
# Default allows all origins (.*) for ease of deployment
# For production, set to a specific regex pattern to restrict origins
CORS_ALLOWED_ORIGINS=.*

# =============================================================================
# SFTP Settings (where CUCM pushes files via "file get activelog")
# =============================================================================
# The embedded SFTP server runs inside the container on port 2222.
# CUCM pushes files here using "file get activelog".
#
# SFTP_HOST: Your machine's IP on the CUCM network
#   Auto-detect (leave empty): app finds its own IP via socket connection
#   Manual: Set to your machine's IP if auto-detect doesn't work
#
# Docker Desktop: ensure Windows Firewall allows inbound TCP port 2222
SFTP_HOST=

SFTP_PORT=2222
SFTP_USERNAME=cucm-collector
SFTP_PASSWORD=your-secure-password

# SFTP_REMOTE_BASE_DIR - usually leave EMPTY for embedded SFTP
# The embedded server chroots to storage/received
SFTP_REMOTE_BASE_DIR=

# =============================================================================
# Embedded SFTP Server Settings
# =============================================================================
# Runs an OpenSSH SFTP server inside the container.
# Enabled by default in Docker (self-contained deployment).

# Enable/disable embedded SFTP server
# Set to true for Docker, false for bare metal with external SFTP
SFTP_SERVER_ENABLED=false

# SFTP server bind address (0.0.0.0 to listen on all interfaces)
SFTP_SERVER_HOST=0.0.0.0

# SFTP server port (default 2222 to avoid conflict with system SSH)
SFTP_SERVER_PORT=2222

# SSH host key path (auto-generated if not set)
# SFTP_SERVER_HOST_KEY_PATH=/app/storage/ssh_host_key

# =============================================================================
# Storage Settings
# =============================================================================
# Local directory where transcripts, jobs, and received artifacts are stored
STORAGE_ROOT=./storage

# =============================================================================
# Job Execution Settings
# =============================================================================
MAX_CONCURRENCY_PER_JOB=2
JOB_COMMAND_TIMEOUT_SEC=600
JOB_CONNECT_TIMEOUT_SEC=30

# =============================================================================
# Security Settings
# =============================================================================
MAX_SSH_RETRIES=3
MAX_SFTP_RETRIES=3

# =============================================================================
# Retention & Cleanup
# =============================================================================
RETENTION_DAYS=7
CLEANUP_ENABLED=true

# =============================================================================
# Profiles
# =============================================================================
PROFILES_PATH=./profiles.yaml

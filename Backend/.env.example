# CUCM Log Collector - Environment Variables (Example)
# Copy this file to .env and fill in your values
#
# For Docker deployment, see docker-compose.yml for recommended settings

# =============================================================================
# API Settings
# =============================================================================
API_HOST=0.0.0.0
API_PORT=8000
LOG_LEVEL=INFO

# Authentication (v0.3) - Optional
# If API_KEY is set, enables bearer token authentication
# If not set or empty, authentication is disabled (dev mode)
API_KEY=

# CORS - Allowed origins regex pattern
# Default allows all origins (.*) for ease of deployment
# For production, set to a specific regex pattern to restrict origins
CORS_ALLOWED_ORIGINS=.*

# =============================================================================
# SFTP Settings (where CUCM pushes files via "file get activelog")
# =============================================================================
# CUCM does NOT support inbound SFTP (pull) or SCP.
# It can only PUSH files outbound to an external SFTP server using
# the "file get activelog" CLI command.
#
# SFTP_HOST: The IP/hostname that CUCM will connect to for file upload
#   Auto-detect (leave empty): app finds its own IP via socket connection
#   Manual: Set to your machine's IP on the CUCM network
#
# For Docker Desktop (Windows/Mac): Set to your HOST machine's SSH server
#   because Docker Desktop port forwarding breaks SSH key exchange.
#   SFTP_HOST=<your PC IP>, SFTP_PORT=22, SFTP_USERNAME=<PC login>
#
# For native Linux Docker: Leave defaults (embedded SFTP on port 2222 works)
SFTP_HOST=

SFTP_PORT=2222
SFTP_USERNAME=cucm-collector
SFTP_PASSWORD=your-secure-password

# SFTP_REMOTE_BASE_DIR - Directory path on SFTP server
# For embedded SFTP server (Docker mode): Leave EMPTY
# For host SSH server: Set to absolute path of storage/received on host
# Backend creates: {capture-id}/ directories under this path
SFTP_REMOTE_BASE_DIR=

# =============================================================================
# Embedded SFTP Server Settings (Docker mode)
# =============================================================================
# When enabled, runs an OpenSSH SFTP server inside the container.
# Works on native Linux Docker. Does NOT work through Docker Desktop
# port forwarding (SSH key exchange fails).

# Enable/disable embedded SFTP server
# Set to true for Docker, false for bare metal with external SFTP
SFTP_SERVER_ENABLED=false

# SFTP server bind address (0.0.0.0 to listen on all interfaces)
SFTP_SERVER_HOST=0.0.0.0

# SFTP server port (default 2222 to avoid conflict with system SSH)
SFTP_SERVER_PORT=2222

# SSH host key path (auto-generated if not set)
# SFTP_SERVER_HOST_KEY_PATH=/app/storage/ssh_host_key

# =============================================================================
# Storage Settings
# =============================================================================
# Local directory where transcripts, jobs, and received artifacts are stored
STORAGE_ROOT=./storage

# =============================================================================
# Job Execution Settings
# =============================================================================
MAX_CONCURRENCY_PER_JOB=2
JOB_COMMAND_TIMEOUT_SEC=600
JOB_CONNECT_TIMEOUT_SEC=30

# =============================================================================
# Security Settings
# =============================================================================
MAX_SSH_RETRIES=3
MAX_SFTP_RETRIES=3

# =============================================================================
# Retention & Cleanup
# =============================================================================
RETENTION_DAYS=7
CLEANUP_ENABLED=true

# =============================================================================
# Profiles
# =============================================================================
PROFILES_PATH=./profiles.yaml
